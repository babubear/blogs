<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/277494; Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="8921"/>

<div>
<span><div>todo:</div><div>     看完动画那节</div><div>     给钟加数字</div><div>     回顾已写动画</div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>canvas元素</b></span></div><div><span style="font-size: 16px;"><b><br/></b></span></div><div><span style="font-size: 16px;">     _兼容IE8及其更低版本的方法 <a href="https://code.google.com/archive/p/fxcanvas/">https://code.google.com/archive/p/fxcanvas/</a></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>2d渲染上下文</b></span></div><div><span style="font-size: 16px;"><b><br/></b></span></div><div><span style="font-size: 16px;">     ctx = canvas.getContext('2d')</span></div><div><span style="font-size: 16px;">    </span></div><div><span style="font-size: 16px;">     _它包含绘图和图形操作的所有方法</span></div><div><span style="font-size: 16px;">     _它的尺寸取决于canvas容器的尺寸</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>笛卡尔坐标系</b></span></div><div><span style="font-size: 16px;">     <img src="text_files/Image.png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;">     _普通显示器下，坐标一个单位对应一像素；</span></div><div><span style="font-size: 16px;">     _高dpi设备下，坐标一个单位对应的像素与倍率有关</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>canvas的默认宽高和宽高设置</b></span></div><div><span style="font-size: 16px;">     </span></div><div><span style="font-size: 16px;">     _canvas的width、height是其的属性，通过书写在html内或者由js赋值如 canvas.width = 500</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _canvas的默认宽高分别为300、150</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _注意区别css中的width、height</span></div><div><span style="font-size: 16px;"><br/></span></div><div><hr/></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>绘制基本路径，直线、曲线</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画一条直线的步骤</span></div><div><span style="font-size: 16px;">     </span></div><div><span style="font-size: 16px;">     ctx.beginPath();</span></div><div><span style="font-size: 16px;">     ctx.moveTo(10, 10);</span></div><div><span style="font-size: 16px;">     ctx.lineTo(100, 100);</span></div><div><span style="font-size: 16px;">     ctx.closePath();</span></div><div><span style="font-size: 16px;">     ctx.stroke();</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画一条曲线（二次、三次贝赛尔曲线）</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>绘制基本图形，矩形、圆、任意图形</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画矩形的方法：strokeRect()、fillRect()</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画圆的方法：arc()</span></div><div><span style="font-size: 16px;">       参数：arc( originX, originY, radius, startAngle, endAngle, anticlockwise )</span></div><div><span style="font-size: 16px;">     </span></div><div><span style="font-size: 16px;">        <img src="text_files/Image [1].png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _任意图形，则是线与线首尾相连组合而成</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>绘制文本</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _填充文本：fillText()</span></div><div><span style="font-size: 16px;">     _描边文本：strokeText()</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>改变颜色</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画布默认色值为#000</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _填充色值属性：fillStyle</span></div><div><span style="font-size: 16px;">       线条色值属性：strokeStyle</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>渐变、阴影、合成</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _渐变分为：</span></div><div><span style="font-size: 16px;">          线性渐变 createLinearGradient()</span></div><div><span style="font-size: 16px;">          径向渐变 createRadialGradient()</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><img src="text_files/Image [2].png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">    </span></div><div><span style="font-size: 16px;">      _阴影属性：</span></div><div><span style="font-size: 16px;">          shadowBlur</span></div><div><span style="font-size: 16px;">          shadowColor</span></div><div><span style="font-size: 16px;">          shadowOffsetX</span></div><div><span style="font-size: 16px;">          shadowOffsetY</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _合成</span></div><div><span style="font-size: 16px;">          globalCompositeOperation</span></div><div><span style="font-size: 16px;">          后绘制的称为“源”（source），先绘制的称为“目标”（destination）</span></div><div><span style="font-size: 16px;"><br/></span></div><div><hr/></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>画布的变换</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _位移：translate()</span></div><div><span style="font-size: 16px;"><img src="text_files/Image [3].png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _缩放：scale()</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _旋转：rotate()</span></div><div><span style="font-size: 16px;"><img src="text_files/Image [4].png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _裁剪：clip()</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画布清除：clearRect()</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _变换矩阵：</span></div><div><span style="font-size: 16px;"><img src="text_files/Image [5].png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">          transform(a, b, c, d, e, f)</span></div><div><span style="font-size: 16px;">          setTransform(a, b, c, d, e, f)</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _每一种形变方法都会影响方法执行后所绘制的所有元素</span></div><div><span style="font-size: 16px;"> </span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>画布状态的保存与恢复</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画布的状态：</span></div><div><span style="font-size: 16px;">          即用于描述画布绘图状态的全部属性，包括变换矩阵、裁剪区域、透明度、合成方式、颜色、粗细值、阴影值等。</span></div><div><span style="font-size: 16px;">          状态是2d渲染上下文属性的描述，而不是画布上显示内容的副本。</span></div><div><span style="font-size: 16px;"> </span></div><div><span style="font-size: 16px;">     _画布保存：save()，存入状态栈</span></div><div><span style="font-size: 16px;">     _画布恢复：restore() ，移除状态栈</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>画布导出</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _方法：canvas.toDataURL()</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>图像绘制</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _加载图像：drawImage(image, x, y)</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _调整图像：drawImage(image, x, y, width, height)</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _裁剪图像：drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight)     </span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><b><span style="font-size: 16px;">像素操作</span></b></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _方法：getImageData(x, y, width, height)</span></div><div><span style="font-size: 16px;"><img src="text_files/Image [6].png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _该返回ImageData对象，这一对象包含3个属性：width、height、data</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _其中data包含所访问区域中全部像素信息，即CanvasPixelArray</span></div><div><span style="font-size: 16px;">      CanvasPixelArray 是一维数组，从下标0开始、每4个值决定一个像素值（rgba值），如下图所示，</span></div><div><span style="font-size: 16px;"><img src="text_files/Image [7].png" type="image/png" style="height: auto;"/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _创建像素：createImageData(width, height)</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _像素放置于画布：putImageData(ImageData, x, y)</span></div><div><span style="font-size: 16px;">          </span></div><div><span style="font-size: 16px;">     </span></div><div><hr/></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;"><b>实践</b></span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画五角星</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _给小视频打码</span></div><div><span style="font-size: 16px;"><br/></span></div><div><span style="font-size: 16px;">     _画时钟</span></div><div><br/></div></span>
</div></body></html> 